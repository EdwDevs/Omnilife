<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#5E2C83">
    <title>Calculadora Pro | Omnilife & Seytu</title>
    
    <!-- Iconos y Fuentes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* === PALETA OMNILIFE & SEYTU === */
            --omni-purple: #5E2C83;    /* Morado Institucional */
            --omni-orange: #F39200;    /* Naranja Energía */
            --seytu-pink: #E91E63;     /* Rosa Seytu */
            --seytu-gold: #D4AF37;     /* Dorado Seytu */
            
            --primary: var(--omni-purple);
            --primary-light: #7E57C2;
            --accent: var(--omni-orange);
            --success: #00C853;
            
            --bg-body: #F3F4F6;
            --bg-card: #ffffff;
            --text-main: #1F2937;
            --text-muted: #6B7280;
            --border: #E5E7EB;
            
            --radius: 16px;
            --shadow-sm: 0 2px 4px rgba(94, 44, 131, 0.1);
            --shadow-lg: 0 10px 25px -5px rgba(94, 44, 131, 0.15);
            --shadow-hover: 0 20px 30px -10px rgba(94, 44, 131, 0.3);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding-bottom: 100px; /* Espacio extra para FAB */
            background-image: radial-gradient(circle at 10% 20%, rgba(94, 44, 131, 0.05) 0%, transparent 20%),
                              radial-gradient(circle at 90% 80%, rgba(243, 146, 0, 0.05) 0%, transparent 20%);
            background-attachment: fixed;
        }

        /* === ANIMACIONES === */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse-glow {
            0% { box-shadow: 0 0 0 0 rgba(243, 146, 0, 0.4); transform: scale(1); }
            70% { box-shadow: 0 0 0 10px rgba(243, 146, 0, 0); transform: scale(1.05); }
            100% { box-shadow: 0 0 0 0 rgba(243, 146, 0, 0); transform: scale(1); }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /*Header Sticky con Degradado Omni */
        .app-header {
            position: sticky;
            top: 0;
            z-index: 50;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255,255,255,0.3);
            padding: 1rem;
            box-shadow: var(--shadow-sm);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .brand {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand h1 {
            font-size: 1.4rem;
            font-weight: 800;
            margin: 0;
            background: linear-gradient(135deg, var(--omni-purple) 0%, var(--omni-orange) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Search Bar */
        .search-wrapper {
            position: relative;
            width: 100%;
        }

        .search-input {
            width: 100%;
            padding: 14px 16px 14px 45px;
            border-radius: 50px; /* Más redondo, estilo moderno */
            border: 2px solid transparent;
            background: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--omni-purple);
            box-shadow: 0 0 0 4px rgba(94, 44, 131, 0.15);
        }

        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--omni-purple);
            font-size: 1.1rem;
        }

        /* Tabs con estilo Píldora */
        .tabs-container {
            display: flex;
            gap: 0.75rem;
            margin-top: 0.5rem;
            padding: 4px;
            background: #E0E0E0;
            border-radius: 50px;
            position: relative;
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: transparent;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            z-index: 1;
        }

        .tab-btn.active {
            background: white;
            color: var(--omni-purple);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transform: scale(1.02);
        }
        
        .tab-btn.active.seytu {
            color: var(--seytu-pink);
        }

        /* Grid Layout */
        .main-container {
            max-width: 1200px;
            margin: 1.5rem auto;
            padding: 0 1rem;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        /* Product Card con Animaciones */
        .product-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: 1px solid white;
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) backwards; /* Animación de entrada */
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: rgba(94, 44, 131, 0.2);
        }

        /* Decoración sutil en la tarjeta */
        .product-card::before {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 60px; height: 60px;
            background: linear-gradient(135deg, transparent 50%, rgba(243, 146, 0, 0.1) 50%);
            border-radius: 0 0 0 100%;
            pointer-events: none;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .product-code {
            font-size: 0.7rem;
            font-weight: 800;
            color: var(--text-muted);
            background: #F3F4F6;
            padding: 4px 10px;
            border-radius: 20px;
            letter-spacing: 0.5px;
        }

        .product-points {
            font-size: 0.75rem;
            color: var(--omni-purple);
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 4px;
            background: rgba(94, 44, 131, 0.08);
            padding: 4px 10px;
            border-radius: 20px;
        }

        .product-title-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 12px;
        }

        .product-title {
            font-weight: 700;
            font-size: 1.05rem;
            line-height: 1.4;
            color: var(--text-main);
            margin: 0;
            flex: 1;
        }

        .info-btn {
            background: white;
            color: var(--omni-orange);
            border: 1px solid var(--omni-orange);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            transition: all 0.2s;
        }

        .info-btn:hover {
            background: var(--omni-orange);
            color: white;
            transform: rotate(15deg);
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px dashed var(--border);
        }

        .price-block {
            display: flex;
            flex-direction: column;
        }

        .price-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .price-value-public {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--text-main);
            letter-spacing: -0.5px;
        }
        
        .profit-highlight {
            font-size: 0.85rem;
            color: var(--success);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 2px;
            background: rgba(0, 200, 83, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            width: fit-content;
        }

        .cost-hidden {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 4px;
            opacity: 0.7;
        }

        /* Controls inside Card */
        .card-actions {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 10px;
        }

        .qty-selector {
            display: flex;
            align-items: center;
            background: var(--bg-body);
            border-radius: 12px;
            padding: 4px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .qty-btn-card {
            width: 32px;
            height: 32px;
            border: none;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            color: var(--primary);
            font-weight: bold;
            transition: transform 0.1s;
        }
        .qty-btn-card:active { transform: scale(0.9); }

        .qty-val-card {
            width: 30px;
            text-align: center;
            font-weight: 700;
            font-size: 1rem;
            color: var(--primary);
        }

        .add-btn {
            background: linear-gradient(135deg, var(--omni-purple) 0%, #7E57C2 100%);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 4px 10px rgba(94, 44, 131, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(94, 44, 131, 0.4);
        }
        .add-btn:active { transform: scale(0.98); }

        .in-cart-indicator {
            background: #E8F5E9;
            color: var(--success);
            font-size: 0.75rem;
            padding: 6px 10px;
            border-radius: 8px;
            font-weight: 700;
            display: none;
            border: 1px solid #C8E6C9;
        }
        .card-active {
            border-color: var(--omni-purple);
            background: linear-gradient(to bottom, white, #FBF7FF);
        }
        .card-active .in-cart-indicator { display: inline-flex; align-items: center; gap: 4px; }
        .card-active .add-btn { display: none; }
        .card-active .qty-selector { display: flex; }
        .qty-selector { display: none; } /* Hidden by default */


        /* Floating Cart Button Pulsante */
        .fab-cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--omni-orange), #FFB74D);
            color: white;
            width: 68px;
            height: 68px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(243, 146, 0, 0.4);
            cursor: pointer;
            z-index: 90;
            transition: transform 0.3s;
            animation: pulse-glow 2s infinite;
        }

        .fab-cart:hover { transform: scale(1.1); animation: none; }

        .fab-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--omni-purple);
            color: white;
            font-size: 0.85rem;
            font-weight: 800;
            min-width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Slide-over Cart (Drawer) */
        .cart-drawer {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 450px;
            height: 100vh;
            background: white;
            z-index: 100;
            box-shadow: -10px 0 40px rgba(0,0,0,0.2);
            transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1); /* Elastic slide */
            display: flex;
            flex-direction: column;
        }

        .cart-drawer.open { right: 0; }

        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(94, 44, 131, 0.4);
            backdrop-filter: blur(4px);
            z-index: 99;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
        }

        .drawer-overlay.open { opacity: 1; visibility: visible; }

        .drawer-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to right, var(--omni-purple), #7E57C2);
            color: white;
        }

        .drawer-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background: var(--bg-body);
        }

        .cart-item-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            animation: popIn 0.3s ease-out backwards;
        }

        .cart-item-details { flex: 1; }

        .drawer-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            background: white;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        }

        .summary-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .summary-total-sale {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--text-main);
            padding: 8px 0;
            border-top: 1px dashed var(--border);
        }

        .summary-total-profit {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            padding: 10px;
            background: rgba(0, 200, 83, 0.1);
            border-radius: 8px;
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--success);
        }

        .btn-checkout {
            width: 100%;
            background: #25D366; /* WhatsApp Green */
            color: white;
            border: none;
            padding: 14px;
            border-radius: 50px;
            font-weight: 800;
            margin-top: 1rem;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-checkout:hover { transform: scale(1.02); }

        /* INFO MODAL */
        .modal-info {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .modal-info.active { opacity: 1; visibility: visible; }

        .modal-card {
            background: white;
            border-radius: 24px;
            width: 100%;
            max-width: 500px;
            padding: 2.5rem 2rem;
            position: relative;
            transform: scale(0.9) translateY(20px);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .modal-info.active .modal-card { transform: scale(1) translateY(0); }

        .modal-close-btn {
            position: absolute;
            top: 1rem; right: 1rem;
            background: #F3F4F6;
            border: none;
            width: 36px; height: 36px;
            border-radius: 50%;
            font-size: 1.2rem; cursor: pointer;
            color: var(--text-muted);
            transition: background 0.2s;
        }
        .modal-close-btn:hover { background: #E5E7EB; }

        .info-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 1.5rem;
        }
        .tag-pill {
            background: white;
            color: var(--omni-purple);
            border: 1px solid rgba(94, 44, 131, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
        }
        .tag-pill.highlight {
            background: rgba(94, 44, 131, 0.05);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: #1f2937;
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s;
            z-index: 200;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

    </style>
</head>
<body>

    <!-- Header Fijo -->
    <header class="app-header">
        <div class="header-content">
            <div class="brand">
                <h1><i class="fas fa-shopping-bag" style="color: var(--omni-orange)"></i> OmniCalc Pro</h1>
                <div style="background: var(--omni-purple); color: white; padding: 4px 10px; border-radius: 12px; font-size: 0.75rem; font-weight: 700;">
                    Desc. 35%
                </div>
            </div>
            
            <div class="search-wrapper">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="searchInput" class="search-input" placeholder="Buscar producto o condición...">
            </div>

            <div class="tabs-container">
                <button class="tab-btn active" onclick="switchPortfolio('nutricion')">
                    <i class="fas fa-leaf"></i> Nutrición
                </button>
                <button class="tab-btn" onclick="switchPortfolio('seytu')">
                    <i class="fas fa-spa"></i> Seytu
                </button>
            </div>
        </div>
    </header>

    <!-- Grid de Productos -->
    <main class="main-container">
        <div id="productsGrid" class="product-grid">
            <!-- Items injected by JS -->
        </div>
        
        <div id="noResults" style="display:none; text-align: center; padding: 4rem 2rem; color: var(--text-muted); animation: fadeInUp 0.5s;">
            <div style="font-size: 3rem; margin-bottom: 1rem; color: var(--omni-purple); opacity: 0.3;"><i class="fas fa-search"></i></div>
            <h3 style="margin:0; color: var(--text-main);">Sin resultados</h3>
            <p>Intenta buscar por beneficio, ejemplo: "energía", "manchas"...</p>
        </div>
    </main>

    <!-- Botón Flotante -->
    <div class="fab-cart" onclick="toggleCart()">
        <i class="fas fa-shopping-basket" style="font-size: 1.5rem;"></i>
        <span class="fab-badge" id="cartCount">0</span>
    </div>

    <!-- Drawer Carrito (Off-Canvas) -->
    <div class="drawer-overlay" id="drawerOverlay" onclick="toggleCart()"></div>
    <div class="cart-drawer" id="cartDrawer">
        <div class="drawer-header">
            <h2 style="margin:0; font-size:1.25rem; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-shopping-cart"></i> Tu Pedido
            </h2>
            <button onclick="toggleCart()" style="background:rgba(255,255,255,0.2); border:none; width: 36px; height: 36px; border-radius: 50%; color:white; cursor:pointer; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="drawer-body" id="cartItemsList">
            <!-- Cart Items injected here -->
        </div>

        <div class="drawer-footer">
            <div class="summary-line">
                <span>Puntos Totales:</span>
                <span id="summaryPoints" style="font-weight: 700; color: var(--omni-purple);">0 pts</span>
            </div>
            <div class="summary-line">
                <span>Costo Inversión (35%):</span>
                <span id="summaryCost">$0</span>
            </div>
            
            <div class="summary-total-sale">
                <span>Total a Cobrar:</span>
                <span style="color: var(--text-main);" id="summarySuggested">$0</span>
            </div>
            
            <div class="summary-total-profit">
                <span><i class="fas fa-wallet"></i> Tu Ganancia:</span>
                <span id="summaryProfit">$0</span>
            </div>

            <button class="btn-checkout" onclick="checkout()">
                <i class="fab fa-whatsapp" style="font-size: 1.2rem;"></i> Enviar Pedido
            </button>
            <button onclick="clearCart()" style="width:100%; border:none; background:none; color: var(--text-muted); padding: 10px; cursor:pointer; font-size:0.8rem; margin-top:0.5rem; opacity: 0.7;">
                <i class="fas fa-trash-alt"></i> Vaciar Carrito
            </button>
        </div>
    </div>

    <!-- Modal de Información -->
    <div class="modal-info" id="infoModal">
        <div class="modal-card">
            <button class="modal-close-btn" onclick="closeInfoModal()"><i class="fas fa-times"></i></button>
            <div id="modalContent">
                <!-- Injected via JS -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle" style="color: #4ADE80; font-size: 1.2rem;"></i>
        <span id="toastMsg">Producto agregado</span>
    </div>

    <script>
        // ========================
        // DATA (Enriquecida con Tags y Beneficios)
        // ========================
        const productsNutricion = [
            { code: "4250604", description: "ALOE BETA PIÑA, 200 ML E", points: 5, listPrice: 9700, discount35: 8773, suggestedPrice: 12800, tags: ["digestión", "gastritis", "desintoxicación", "inflamación", "cicatrización"], benefits: "Desintoxica, desinflama y cicatriza cualquier parte del organismo. Ideal para gastritis y colitis." },
            { code: "4850500", description: "EGO FRUTAS DEL BOSQUE EVOLUCIÓN LATA 355 ML", points: 26, listPrice: 72200, discount35: 65298, suggestedPrice: 95350, tags: ["hígado", "resaca", "digestión pesada", "metabolismo"], benefits: "Favorece el funcionamiento del hígado y ayuda en la digestión de grasas y alcohol." },
            { code: "1260600", description: "EGO PLANT BOTELLA 200 ML E", points: 5, listPrice: 9700, discount35: 8773, suggestedPrice: 12800, tags: ["riñones", "vías urinarias", "retención líquidos", "infección"], benefits: "Ayuda a depurar los riñones y vías urinarias. Excelente para infecciones recurrentes." },
            { code: "2075722", description: "BIOCROS SUPREME CAJA 30 SOBRES 240G", points: 53, listPrice: 90900, discount35: 82210, suggestedPrice: 120050, tags: ["energía", "cansancio", "fatiga", "deporte", "ánimo"], benefits: "Proporciona energía inmediata (6-8 horas). Ideal para combatir cansancio, fatiga y pereza." },
            { code: "1429653", description: "OMNILIFE F PLUS", points: 54, listPrice: 102000, discount35: 92249, suggestedPrice: 134750, tags: ["mujer", "hormonal", "cólicos", "menopausia", "quistes"], benefits: "Nutrición especializada para el sistema hormonal femenino. Ayuda con cólicos y menopausia." },
            { code: "5174732", description: "CAFELIFE PLUS CAJA 30 SOBRES 150 G", points: 51, listPrice: 85000, discount35: 76874, suggestedPrice: 112300, tags: ["peso", "bajar peso", "grasa", "ansiedad", "café"], benefits: "Café termogénico que ayuda a utilizar la grasa como energía y controlar la ansiedad." },
            { code: "4160100", description: "AGUA BLU, SUPREME DE 1.5 LTS", points: 3, listPrice: 5750, discount35: 4370, suggestedPrice: 6400, tags: ["hidratación", "agua", "alcalina"], benefits: "Agua de manantial mineral natural, ligera y con pH balanceado." },
            { code: "4160400", description: "AGUA BLU, SUPREME 600 ML", points: 1, listPrice: 2950, discount35: 2242, suggestedPrice: 3250, tags: ["hidratación", "agua", "alcalina"], benefits: "Agua de manantial mineral natural, formato personal." },
            { code: "4250204", description: "ALOE BETA PIÑA 960 ML E", points: 25, listPrice: 47100, discount35: 42597, suggestedPrice: 62200, tags: ["digestión", "gastritis", "desintoxicación", "inflamación", "cicatrización"], benefits: "Versión grande. Desintoxica, desinflama y cicatriza. Potente antioxidante." },
            { code: "3924734", description: "AQTUA SUPREME, CAJA 30 SACHETS", points: 112, listPrice: 146600, discount35: 132585, suggestedPrice: 193650, tags: ["corazón", "circulación", "energía", "antioxidante", "coq10"], benefits: "Favorece el sistema cardiovascular y la circulación. Contiene Coenzima Q10 (Juventud)." },
            { code: "4650609", description: "EGO 10 BOTELLA 200 ML E", points: 5, listPrice: 9700, discount35: 8773, suggestedPrice: 12800, tags: ["energía", "vitaminas", "cansancio"], benefits: "Bebida energética suave rica en vitaminas del complejo B." },
            { code: "4978904", description: "EGO LIFE SUPREME CAJA 30 SOBRES", points: 32, listPrice: 63000, discount35: 56977, suggestedPrice: 83200, tags: ["hidratación", "electrolitos", "deporte", "suero"], benefits: "Rehidratante hipotónico natural. Repone electrolitos perdidos por sudor o enfermedad." },
            { code: "1675700", description: "ESTOP PLUS CAJA 30 SACHETS 450G", points: 102, listPrice: 190400, discount35: 172198, suggestedPrice: 251500, tags: ["colesterol", "corazón", "circulación", "triglicéridos"], benefits: "Ayuda a mantener niveles saludables de colesterol y triglicéridos en sangre." },
            { code: "8453000", description: "FLU-Y BOTE 60 CAPSULAS", points: 39, listPrice: 76500, discount35: 69187, suggestedPrice: 101050, tags: ["estrés", "relajación", "cerebro", "ansiedad"], benefits: "Ayuda a combatir el estrés y favorece la relajación sin producir sueño." },
            { code: "5350513", description: "FX MANZANA EVOLUCIÓN", points: 11, listPrice: 26000, discount35: 23514, suggestedPrice: 34350, tags: ["refresco", "antioxidante", "niños"], benefits: "Refresco saludable carbonatado con vitaminas C y E. Sabor Manzana." },
            { code: "5350501", description: "FX NARANJA EVOLUCIÓN", points: 11, listPrice: 26000, discount35: 23514, suggestedPrice: 34350, tags: ["refresco", "antioxidante", "niños"], benefits: "Refresco saludable carbonatado con vitaminas C y E. Sabor Naranja." },
            { code: "1729752", description: "HOMO PLUS, CAJA 30 SACHETS 180 G", points: 54, listPrice: 102000, discount35: 92249, suggestedPrice: 134750, tags: ["hombre", "próstata", "hormonal", "masculino"], benefits: "Nutrición para el sistema hormonal masculino y cuidado de la próstata." },
            { code: "1850610", description: "OMNILIFE KOLINA, BOTELLA 200 ML E", points: 5, listPrice: 9700, discount35: 8773, suggestedPrice: 12800, tags: ["cándida", "digestión", "flora", "infección"], benefits: "Extracto de coco y piña. Ayuda a controlar la cándida y mejorar la flora intestinal." },
            { code: "6521959", description: "OMNIOST EVOLUCION 300GR", points: 57, listPrice: 111400, discount35: 100750, suggestedPrice: 147150, tags: ["huesos", "calcio", "osteoporosis", "lesiones"], benefits: "Alto contenido de calcio y vitamina D para fortalecer huesos y prevenir osteoporosis." },
            { code: "2350430", description: "OMNIPLUS FRUTAS EVOLUCION 30 SACH 6", points: 79, listPrice: 139700, discount35: 126345, suggestedPrice: 184550, tags: ["defensas", "inmunológico", "vitaminas", "gripa", "anemia"], benefits: "El producto estrella. Multivitamínico micelizado que eleva el sistema inmunológico." },
            { code: "2360401", description: "OMNIPLUS NARAN SUP CAJA 30 SOBRES 6", points: 78, listPrice: 139700, discount35: 126345, suggestedPrice: 184550, tags: ["defensas", "inmunológico", "vitaminas", "gripa", "anemia"], benefits: "El producto estrella. Multivitamínico micelizado que eleva el sistema inmunológico." },
            { code: "5827415", description: "OMNIVIU SUPREME CAJA C/30 SACHETS 1", points: 58, listPrice: 95600, discount35: 86461, suggestedPrice: 126300, tags: ["ojos", "vista", "visión", "luteína"], benefits: "Nutrición específica para proteger y mejorar la salud visual (Luteína y Zeaxantina)." },
            { code: "2505711", description: "COGNOS EVOLUCION CAJA", points: 61, listPrice: 95200, discount35: 86099, suggestedPrice: 125750, tags: ["cerebro", "memoria", "concentración", "estudio"], benefits: "Favorece la concentración, memoria y claridad mental. (Antes Optimus)." },
            { code: "6722800", description: "OMNILIFE PROBIOTIC CAJA 30 SOBRES S", points: 62, listPrice: 118400, discount35: 107081, suggestedPrice: 156400, tags: ["digestión", "flora", "probióticos", "estómago"], benefits: "1 billón de probióticos por sobre para regenerar la flora intestinal y mejorar digestión." },
            { code: "5479243", description: "OMNILIFE PUMP SUPREME CAJA 12 SOBRE", points: 69, listPrice: 114800, discount35: 103825, suggestedPrice: 151650, tags: ["proteína", "músculo", "gimnasio", "deporte"], benefits: "Proteína vegetal de alta calidad para recuperación y aumento de masa muscular." },
            { code: "7170943", description: "OMNILIFE SHAKE SUPREME CAJA 12 SOBR", points: 76, listPrice: 121700, discount35: 110065, suggestedPrice: 160750, tags: ["desayuno", "peso", "nutrición", "comida"], benefits: "Malteada nutricional completa. Puede reemplazar desayuno o cena para control de peso." },
            { code: "7170921", description: "OMNILIFE SHAKE SUPREME FRESA SILVES", points: 76, listPrice: 121700, discount35: 110065, suggestedPrice: 160750, tags: ["desayuno", "peso", "nutrición", "comida"], benefits: "Malteada nutricional completa sabor Fresa. Reemplazo de comida saludable." },
            { code: "3000730", description: "STARBIEN EVOLUCIÓN CAJA C 30 SOBRES", points: 53, listPrice: 89900, discount35: 81306, suggestedPrice: 118750, tags: ["estrés", "energía", "calambres", "embarazo"], benefits: "Energía sostenida y sensación de bienestar. Rico en ácido fólico, ideal en embarazo." },
            { code: "3178516", description: "SUPER MIX SUPREME VAINILLA CAJA 510", points: 76, listPrice: 118900, discount35: 107533, suggestedPrice: 157050, tags: ["anemia", "niños", "desayuno", "nutrición"], benefits: "Alimento completo con hierro y proteínas. Ideal para niños y combatir anemia." },
            { code: "3575609", description: "THERMOGEN TEA MARAC SUPREME 30 SACH", points: 92, listPrice: 154400, discount35: 139639, suggestedPrice: 203950, tags: ["peso", "tiroides", "grasa", "té"], benefits: "Té termogénico sabor Maracuyá. Especial para personas con metabolismo lento (tiroides)." },
            { code: "3806816", description: "UZO EVOLUCION 240 GR", points: 167, listPrice: 244000, discount35: 220674, suggestedPrice: 322300, tags: ["cáncer", "inmunológico", "células", "defensas"], benefits: "Potente inmunomodulador. Ayuda a aumentar la actividad de las células Natural Killer." },
            { code: "5025516", description: "OMNILIFE VKIDS DOYPACK 400G", points: 71, listPrice: 121200, discount35: 109613, suggestedPrice: 160100, tags: ["niños", "crecimiento", "bebé", "nutrición"], benefits: "Nutrición completa diseñada específicamente para el desarrollo de bebés y niños." },
            { code: "3575605", description: "THERMOGEN TEA LIMÓN, SUPREME C/30", points: 54, listPrice: 102400, discount35: 92611, suggestedPrice: 135250, tags: ["peso", "grasa", "talla", "té"], benefits: "Té termogénico clásico sabor Limón. Ayuda a quemar grasa y reducir tallas." },
            { code: "6379929", description: "ONE C MIX PLUS CAJA", points: 43, listPrice: 78500, discount35: 70995, suggestedPrice: 103700, tags: ["vitamina c", "piel", "colágeno", "resfriado", "defensas"], benefits: "Doble vitamina C y Glutatión. Potente antioxidante, ayuda a producir colágeno." },
            { code: "4475910", description: "DOLCE VITA SUPREME TORONJA, CAJA 30", points: 63, listPrice: 115400, discount35: 104368, suggestedPrice: 152450, tags: ["diabetes", "azúcar", "peso", "ansiedad"], benefits: "Ayuda a regular los niveles de glucosa en sangre y controlar la ansiedad por dulces." },
            { code: "1578400", description: "FIBER'N PLUS SUPREME SACHET 450 G", points: 66, listPrice: 120800, discount35: 109252, suggestedPrice: 159550, tags: ["fibra", "estreñimiento", "digestión", "colon"], benefits: "Mezcla de fibras para limpiar el sistema digestivo y corregir el estreñimiento." },
            { code: "2603201", description: "POWER MAKER, EVOLUCION", points: 110, listPrice: 156600, discount35: 141629, suggestedPrice: 206850, tags: ["músculo", "huesos", "articulaciones", "potencia", "regeneración"], benefits: "Regenerador de tejidos (hueso, músculo). Arginina para tono muscular y salud hormonal." },
            { code: "2904727", description: "TMGN COFFEE DE OLLA EVOLUCION", points: 39, listPrice: 68510, discount35: 61960, suggestedPrice: 90500, tags: ["café", "peso", "grasa", "termogénico"], benefits: "Café de olla tradicional que ayuda a quemar grasa y controlar el peso." },
            { code: "3304732", description: "TMGN COFFEE EVOLUCION", points: 39, listPrice: 68510, discount35: 61960, suggestedPrice: 90500, tags: ["café", "peso", "grasa", "termogénico"], benefits: "Café sabor tradicional termogénico para apoyar la pérdida de peso." }
        ];

        const productsSeytu = [
            { code: "9501178", description: "CREMA DE DIA FPS30 (SYSTEM) 50ml", points: 67, listPrice: 117040, discount35: 105851, suggestedPrice: 154600, tags: ["piel", "arrugas", "sol", "anti-edad"], benefits: "Hidrata y protege del sol. Parte del sistema Time-Specialist para piel madura." },
            { code: "9501179", description: "SUERO DE NOCHE (SYSTEM) 30ml", points: 71, listPrice: 117190, discount35: 105987, suggestedPrice: 154800, tags: ["noche", "arrugas", "reparación", "anti-edad"], benefits: "Reparación intensiva nocturna. Reduce líneas de expresión mientras duermes." },
            { code: "9501174", description: "CREMA PARA CONTORNO DE OJOS (SYSTEM)", points: 43, listPrice: 75250, discount35: 68056, suggestedPrice: 99400, tags: ["ojos", "ojeras", "arrugas", "bolsas"], benefits: "Mejora la apariencia de ojeras, líneas de expresión y bolsas en los ojos." },
            { code: "9504024", description: "SHAMPOO FORTIFICANTE", points: 49, listPrice: 81310, discount35: 73537, suggestedPrice: 107400, tags: ["cabello", "caída", "fuerza"], benefits: "Fortalece el folículo capilar para evitar la caída del cabello." },
            { code: "9501181", description: "LOCION CAPILAR FORTIFICANTE", points: 62, listPrice: 110910, discount35: 100307, suggestedPrice: 146500, tags: ["cabello", "caída", "ampolleta"], benefits: "Tratamiento intensivo para detener la caída del cabello y promover crecimiento." },
            { code: "9501197", description: "GEL ANTI-MANCHAS", points: 53, listPrice: 102580, discount35: 92773, suggestedPrice: 135500, tags: ["manchas", "aclarar", "piel"], benefits: "Ayuda a disminuir el tono de las manchas causadas por sol o acné." },
            { code: "9501200", description: "CREMA PARA MANOS CUELLO Y ESCOTE", points: 45, listPrice: 95160, discount35: 86063, suggestedPrice: 125700, tags: ["manos", "cuello", "manchas", "edad"], benefits: "Previene signos de la edad y manchas en manos, cuello y escote." },
            { code: "9501187", description: "DERMOLIMPIADOR FACIAL", points: 29, listPrice: 63590, discount35: 57511, suggestedPrice: 84000, tags: ["limpieza", "cara", "jabón"], benefits: "Limpieza profunda y suave para todo tipo de piel." },
            { code: "9501188", description: "GEL LOCALIZADO", points: 23, listPrice: 62840, discount35: 56832, suggestedPrice: 83000, tags: ["acné", "barros", "espinillas"], benefits: "Aplica directamente sobre el brote (granito) para secarlo rápidamente." },
            { code: "9501189", description: "SUERO PERFECCIONADOR", points: 30, listPrice: 82520, discount35: 74631, suggestedPrice: 109000, tags: ["poros", "piel", "suavidad"], benefits: "Minimiza la apariencia de poros y deja la piel aterciopelada." },
            { code: "9519036", description: "ESPUMA LIMPIADORA FACIAL", points: 33, listPrice: 52990, discount35: 47924, suggestedPrice: 70000, tags: ["limpieza", "aclarar", "diario", "espuma"], benefits: "Limpia y ayuda a recuperar el tono natural de la piel. Uso diario." },
            { code: "9501203", description: "TÓNICO HIDRATANTE", points: 51, listPrice: 93190, discount35: 84281, suggestedPrice: 123100, tags: ["hidratación", "tonificar", "frescura"], benefits: "Equilibra el pH y prepara la piel para recibir hidratación." },
            { code: "9501206", description: "CREMA LIMPIADORA FACIAL", points: 33, listPrice: 51560, discount35: 46631, suggestedPrice: 68100, tags: ["limpieza", "desmaquillante", "suave"], benefits: "Remueve impurezas y maquillaje de forma suave." },
            { code: "9501218", description: "DESMAQUILLANTE PARA OJOS", points: 26, listPrice: 43760, discount35: 39577, suggestedPrice: 57800, tags: ["ojos", "maquillaje", "bifásico"], benefits: "Retira maquillaje a prueba de agua sin irritar los ojos." },
            { code: "9501191", description: "MASCARILLA FACIAL", points: 37, listPrice: 63370, discount35: 57312, suggestedPrice: 83700, tags: ["hidratación", "limpieza profunda", "spa"], benefits: "Hidratación y limpieza profunda para un momento de spa en casa." },
            { code: "9501212", description: "MICRO-EXFOLIANTE FACIAL", points: 31, listPrice: 49970, discount35: 45193, suggestedPrice: 66000, tags: ["exfoliante", "puntos negros", "suavidad"], benefits: "Remueve células muertas y renueva la textura de la piel." },
            { code: "9501171", description: "CREMA HIDRATANTE DE DÍA FPS20", points: 42, listPrice: 73360, discount35: 66347, suggestedPrice: 96900, tags: ["hidratación", "sol", "día"], benefits: "Hidratación básica diaria con protección solar ligera." },
            { code: "9501170", description: "CREMA HIDRATANTE DE NOCHE", points: 42, listPrice: 73360, discount35: 66347, suggestedPrice: 96900, tags: ["hidratación", "noche", "reparación"], benefits: "Hidratación y recuperación de la piel durante la noche." },
            { code: "9501145", description: "SUERO FACIAL HIDRATACIÓN PROFUNDA", points: 39, listPrice: 66090, discount35: 59772, suggestedPrice: 87300, tags: ["hidratación", "suero", "ácido hialurónico"], benefits: "Hidratación intensiva con Ácido Hialurónico. Efecto relleno." },
            { code: "9501157", description: "SUERO CONTORNO OJOS HIDRATACIÓN", points: 21, listPrice: 42320, discount35: 38274, suggestedPrice: 55900, tags: ["ojos", "bolsas", "roll-on"], benefits: "Esfera roll-on fría para desinflamar bolsas y ojeras." },
            { code: "9501186", description: "GEL-CREMA PARA ESTRIAS", points: 46, listPrice: 82220, discount35: 74360, suggestedPrice: 108600, tags: ["cuerpo", "embarazo", "estrías", "piel"], benefits: "Previene y mejora la apariencia de las estrías en la piel." },
            { code: "9501078", description: "CREMA CORPORAL PIEL DE NARANJA", points: 54, listPrice: 84790, discount35: 76684, suggestedPrice: 112000, tags: ["celulitis", "firmeza", "cuerpo"], benefits: "Mejora la textura de la piel (celulitis) y reafirma." },
            { code: "9501214", description: "PROTECTOR SOLAR FACIAL FPS 50+", points: 34, listPrice: 65860, discount35: 59564, suggestedPrice: 87000, tags: ["sol", "bloqueador", "cara"], benefits: "Alta protección solar sin sensación grasosa. Indispensable." },
            { code: "9501215", description: "PROTECTOR SOLAR CORPORAL FPS 50+", points: 48, listPrice: 89940, discount35: 81342, suggestedPrice: 118800, tags: ["sol", "bloqueador", "cuerpo"], benefits: "Protección solar resistente al agua para todo el cuerpo." },
            { code: "9501140", description: "CREMA DE MANOS ANTIBACTERIAL MANZANA", points: 6, listPrice: 10370, discount35: 9379, suggestedPrice: 13700, tags: ["manos", "limpieza", "bacterias"], benefits: "Elimina bacterias e hidrata. Aroma Manzana-Pera." },
            { code: "9501141", description: "CREMA DE MANOS ANTIBACTERIAL VAINILLA", points: 6, listPrice: 10370, discount35: 9379, suggestedPrice: 13700, tags: ["manos", "limpieza", "bacterias"], benefits: "Elimina bacterias e hidrata. Aroma Vainilla." },
            { code: "9501142", description: "CREMA DE MANOS ANTIBACTERIAL SANDÍA", points: 6, listPrice: 10370, discount35: 9379, suggestedPrice: 13700, tags: ["manos", "limpieza", "bacterias"], benefits: "Elimina bacterias e hidrata. Aroma Sandía-Melón." },
            { code: "9501146", description: "OMNIPLUS GEL PREMIUM", points: 28, listPrice: 45570, discount35: 41214, suggestedPrice: 60200, tags: ["acné", "cicatrizar", "piel", "irritación"], benefits: "Gel multiusos con extractos de Omniplus. Cicatriza, desinflama y combate acné." },
            { code: "9501209", description: "BALSAMO LABIAL OMNIPLUS FPS 15", points: 29, listPrice: 49060, discount35: 44370, suggestedPrice: 64800, tags: ["labios", "resequedad", "sol"], benefits: "Protege e hidrata los labios resecos." },
            { code: "9510028", description: "FRAGANCIA SUCCESI FOR HIM", points: 73, listPrice: 114620, discount35: 103662, suggestedPrice: 151400, tags: ["perfume", "hombre", "aroma"], benefits: "Fragancia masculina exclusiva." },
            { code: "9510029", description: "FRAGANCIA SUCCESI FOR HER", points: 73, listPrice: 114620, discount35: 103662, suggestedPrice: 151400, tags: ["perfume", "mujer", "aroma"], benefits: "Fragancia femenina exclusiva." },
            { code: "8916010", description: "LOCION CORPORAL COCO VAINILLA", points: 27, listPrice: 42620, discount35: 38546, suggestedPrice: 56300, tags: ["cuerpo", "hidratación", "aroma"], benefits: "Hidratación ligera con aroma tropical." },
            { code: "8916007", description: "CREMA MANOS COCO VAINILLA", points: 8, listPrice: 15600, discount35: 14109, suggestedPrice: 20600, tags: ["manos", "hidratación"], benefits: "Crema de manos aroma Coco Vainilla." },
            { code: "8916015", description: "JABON CORPORAL FRUTOS ROJOS", points: 23, listPrice: 39900, discount35: 36086, suggestedPrice: 52700, tags: ["baño", "cuerpo", "limpieza"], benefits: "Jabón líquido corporal con aroma a frutos rojos." },
            { code: "8916012", description: "LOCION CORPORAL FRUTOS ROJOS", points: 27, listPrice: 42620, discount35: 38546, suggestedPrice: 56300, tags: ["cuerpo", "hidratación"], benefits: "Hidratación corporal aroma frutos rojos." },
            { code: "8916009", description: "CREMA MANOS FRUTOS ROJOS", points: 8, listPrice: 15600, discount35: 14109, suggestedPrice: 20600, tags: ["manos", "hidratación"], benefits: "Crema de manos aroma Frutos Rojos." },
            { code: "9508037", description: "MAQUILLAJE LIQUIDO UP+ FPS15 FAIR", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508038", description: "MAQUILLAJE LIQUIDO UP+ FPS15 LIGHT SAND", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508039", description: "MAQUILLAJE LIQUIDO UP+ FPS15 SUN HONEY", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508040", description: "MAQUILLAJE LIQUIDO UP+ FPS15 NAT BEIGE", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508041", description: "MAQUILLAJE LIQUIDO UP+ FPS15 WARM BEIGE", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508042", description: "MAQUILLAJE LIQUIDO UP+ FPS15 COOL NAT", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508043", description: "MAQUILLAJE LIQUIDO UP+ FPS15 SUN BEIGE", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508044", description: "MAQUILLAJE LIQUIDO UP+ FPS15 CARAMEL", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9508045", description: "MAQUILLAJE LIQUIDO UP+ FPS15 COCOA", points: 51, listPrice: 94250, discount35: 85240, suggestedPrice: 124500, tags: ["base", "maquillaje", "cobertura", "agua"], benefits: "Base líquida mate, cobertura total, resistente al agua y sudor." },
            { code: "9511029", description: "MAQUILLAJE COMPACTO 2 EN1 FAIR", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9511030", description: "MAQUILLAJE COMPACTO 2 EN1 LIGHT SAND", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9511031", description: "MAQUILLAJE COMPACTO 2 EN1 SUN HONEY", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9511032", description: "MAQUILLAJE COMPACTO 2 EN1 NAT BEIGE", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9511033", description: "MAQUILLAJE COMPACTO 2 EN1 WARM BEIGE", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9511034", description: "MAQUILLAJE COMPACTO 2 EN1 COOL NAT", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9511035", description: "MAQUILLAJE COMPACTO 2 EN1 SUN BEIGE", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9511036", description: "MAQUILLAJE COMPACTO 2 EN1 CARAMEL", points: 42, listPrice: 75930, discount35: 68671, suggestedPrice: 100300, tags: ["polvo", "compacto", "agua"], benefits: "Polvo compacto resistente al agua. Acabado mate aterciopelado." },
            { code: "9501161", description: "CORRECTOR LIQUIDO FAIR", points: 25, listPrice: 41560, discount35: 37587, suggestedPrice: 54900, tags: ["corrector", "ojeras", "imperfecciones"], benefits: "Cubre ojeras e imperfecciones con acabado natural." },
            { code: "9501162", description: "CORRECTOR LIQUIDO LIGHT", points: 25, listPrice: 41560, discount35: 37587, suggestedPrice: 54900, tags: ["corrector", "ojeras", "imperfecciones"], benefits: "Cubre ojeras e imperfecciones con acabado natural." },
            { code: "9501163", description: "CORRECTOR LIQUIDO MEDIUM", points: 25, listPrice: 41560, discount35: 37587, suggestedPrice: 54900, tags: ["corrector", "ojeras", "imperfecciones"], benefits: "Cubre ojeras e imperfecciones con acabado natural." },
            { code: "9501164", description: "CORRECTOR LIQUIDO DEEP", points: 25, listPrice: 41560, discount35: 37587, suggestedPrice: 54900, tags: ["corrector", "ojeras", "imperfecciones"], benefits: "Cubre ojeras e imperfecciones con acabado natural." },
            { code: "8911501", description: "POLVO TRASLUCIDO", points: 35, listPrice: 50800, discount35: 45944, suggestedPrice: 67100, tags: ["sellar", "mate", "rostro"], benefits: "Sella el maquillaje y elimina el brillo facial." },
            { code: "8901101", description: "POLVO ILUMINADOR DESERT SUNSET", points: 21, listPrice: 36040, discount35: 32595, suggestedPrice: 47600, tags: ["brillo", "iluminador", "rostro"], benefits: "Resalta facciones con luz y brillo natural." },
            { code: "8901102", description: "POLVO ILUMINADOR DESERT ROSE", points: 21, listPrice: 36040, discount35: 32595, suggestedPrice: 47600, tags: ["brillo", "iluminador", "rostro"], benefits: "Resalta facciones con luz y brillo natural." },
            { code: "8901103", description: "POLVO ILUMINADOR DESERT SAND", points: 21, listPrice: 36040, discount35: 32595, suggestedPrice: 47600, tags: ["brillo", "iluminador", "rostro"], benefits: "Resalta facciones con luz y brillo natural." },
            { code: "9509015", description: "RUBOR COMPACTO APRICOT", points: 25, listPrice: 43150, discount35: 39025, suggestedPrice: 57000, tags: ["color", "mejillas", "rubor"], benefits: "Aporta color saludable a las mejillas. Larga duración." },
            { code: "9509016", description: "RUBOR COMPACTO PEACH", points: 25, listPrice: 43150, discount35: 39025, suggestedPrice: 57000, tags: ["color", "mejillas", "rubor"], benefits: "Aporta color saludable a las mejillas. Larga duración." },
            { code: "9509017", description: "RUBOR COMPACTO PLUM", points: 25, listPrice: 43150, discount35: 39025, suggestedPrice: 57000, tags: ["color", "mejillas", "rubor"], benefits: "Aporta color saludable a las mejillas. Larga duración." },
            { code: "9506013", description: "DELINEADOR PARA OJOS PENLINER", points: 22, listPrice: 36110, discount35: 32658, suggestedPrice: 47700, tags: ["ojos", "delineador", "plumón", "agua"], benefits: "Delineador tipo plumón. Alta precisión, resistente al agua." },
            { code: "9506014", description: "DELINEADOR LIQUIDO PARA OJOS", points: 24, listPrice: 42470, discount35: 38410, suggestedPrice: 56100, tags: ["ojos", "delineador", "líquido", "agua"], benefits: "Delineador líquido punta pincel. Negro intenso mate." },
            { code: "9505068", description: "LAPIZ DELINEADOR DE OJOS NEGRO", points: 24, listPrice: 37850, discount35: 34232, suggestedPrice: 50000, tags: ["ojos", "lápiz", "agua"], benefits: "Lápiz de textura cremosa y larga duración. Resistente al agua." },
            { code: "9512023", description: "MASCARA PARA PESTAÑAS", points: 30, listPrice: 47920, discount35: 43339, suggestedPrice: 63300, tags: ["ojos", "pestañas", "volumen", "agua"], benefits: "Volumen y alargamiento. Resistente al agua, no se corre." },
            { code: "9506015", description: "SET DELINEADOR COMPACTO DE CEJAS", points: 44, listPrice: 82290, discount35: 74423, suggestedPrice: 108700, tags: ["cejas", "maquillaje"], benefits: "Kit completo (sombra, iluminador, pinza) para diseño de cejas." },
            { code: "8905002", description: "LAPIZ PARA CEJAS UNIVERSAL", points: 18, listPrice: 29750, discount35: 26906, suggestedPrice: 39300, tags: ["cejas", "lápiz"], benefits: "Define y rellena las cejas con acabado natural." },
            { code: "8905003", description: "LAPIZ PARA CEJAS BROWN", points: 18, listPrice: 29750, discount35: 26906, suggestedPrice: 39300, tags: ["cejas", "lápiz"], benefits: "Define y rellena las cejas con acabado natural." },
            { code: "9517524", description: "LABIAL HIDRATANTE HOT PINK", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517525", description: "LABIAL HIDRATANTE LIGHT PINK", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517526", description: "LABIAL HIDRATANTE SAND NUDE", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517527", description: "LABIAL HIDRATANTE ROSE NUDE", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517528", description: "LABIAL HIDRATANTE FLAME CORAL", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517529", description: "LABIAL HIDRATANTE SWEET CORAL", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517530", description: "LABIAL HIDRATANTE SEYTU RED", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517531", description: "LABIAL HIDRATANTE FLASH RED", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517532", description: "LABIAL HIDRATANTE CANDY RED", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517533", description: "LABIAL HIDRATANTE ICON VIOLET", points: 23, listPrice: 44590, discount35: 40327, suggestedPrice: 58900, tags: ["labios", "color", "hidratación"], benefits: "Color intenso con fórmula hidratante y manteca de karité." },
            { code: "9517518", description: "BRILLO LABIAL OPALO", points: 31, listPrice: 53520, discount35: 48403, suggestedPrice: 70700, tags: ["labios", "brillo", "luz"], benefits: "Brillo labial con luz LED y espejo integrado." },
            { code: "9517519", description: "BRILLO LABIAL AMBAR", points: 31, listPrice: 53520, discount35: 48403, suggestedPrice: 70700, tags: ["labios", "brillo", "luz"], benefits: "Brillo labial con luz LED y espejo integrado." },
            { code: "9517520", description: "BRILLO LABIAL TOPAZ", points: 31, listPrice: 53520, discount35: 48403, suggestedPrice: 70700, tags: ["labios", "brillo", "luz"], benefits: "Brillo labial con luz LED y espejo integrado." },
            { code: "9517521", description: "BRILLO LABIAL AGATA", points: 31, listPrice: 53520, discount35: 48403, suggestedPrice: 70700, tags: ["labios", "brillo", "luz"], benefits: "Brillo labial con luz LED y espejo integrado." },
            { code: "9517522", description: "BRILLO LABIAL ZAFIRO", points: 31, listPrice: 53520, discount35: 48403, suggestedPrice: 70700, tags: ["labios", "brillo", "luz"], benefits: "Brillo labial con luz LED y espejo integrado." },
            { code: "9517523", description: "BRILLO LABIAL RUBI", points: 31, listPrice: 53520, discount35: 48403, suggestedPrice: 70700, tags: ["labios", "brillo", "luz"], benefits: "Brillo labial con luz LED y espejo integrado." },
            { code: "9504033", description: "ACONDICIONADOR EXTRACTOS HERBALES", points: 19, listPrice: 28310, discount35: 25604, suggestedPrice: 37400, tags: ["cabello", "suavidad", "hidratación"], benefits: "Acondiciona, desenreda y da brillo al cabello." },
            { code: "9501158", description: "SHAMPOO EXTRACTOS HERBALES 300 ML", points: 21, listPrice: 33160, discount35: 29990, suggestedPrice: 43800, tags: ["cabello", "limpieza", "todo tipo"], benefits: "Shampoo suave para todo tipo de cabello, uso diario." },
            { code: "9504046", description: "ACONDICIONADOR EXTRACTOS HERBALES", points: 21, listPrice: 33160, discount35: 29990, suggestedPrice: 43800, tags: ["cabello", "suavidad"], benefits: "Acondiciona, desenreda y da brillo al cabello." },
            { code: "9504041", description: "SHAMPOO CUIDADO ESPECIAL CABELLO DÉBIL", points: 28, listPrice: 43830, discount35: 39640, suggestedPrice: 57900, tags: ["cabello", "caída", "fuerza"], benefits: "Fortalece el cabello desde la raíz. Ideal para cabello débil." },
            { code: "9504042", description: "SHAMPOO COLOR PROTECT", points: 28, listPrice: 43830, discount35: 39640, suggestedPrice: 57900, tags: ["cabello", "tinte", "color"], benefits: "Protege el color del cabello teñido y prolonga su duración." },
            { code: "9504045", description: "GEL FIJADOR PARA EL CABELLO", points: 14, listPrice: 26800, discount35: 24238, suggestedPrice: 35400, tags: ["cabello", "peinado", "gel"], benefits: "Fijación fuerte sin dejar residuos ni alcohol." },
            { code: "9504044", description: "COMPLEJO MULTIVITAMÍNICO CAPILAR", points: 49, listPrice: 94480, discount35: 85448, suggestedPrice: 124800, tags: ["cabello", "ampolleta", "nutrición"], benefits: "Tratamiento intensivo en ampolletas para cabello dañado." },
            { code: "9501154", description: "MASCARILLA REPARADORA CAPILAR", points: 28, listPrice: 51480, discount35: 46559, suggestedPrice: 68000, tags: ["cabello", "reparación", "hidratación"], benefits: "Repara puntas abiertas, hidrata y elimina el frizz." },
            { code: "9518039", description: "TINTE PERMANENTE CASTAÑO OSCURO", points: 28, listPrice: 51250, discount35: 46351, suggestedPrice: 67700, tags: ["tinte", "cabello", "sin amoniaco"], benefits: "Tinte sin amoniaco, cobertura de canas y cuidado capilar." },
            { code: "9518040", description: "TINTE PERMANENTE CASTAÑO CLARO", points: 28, listPrice: 51250, discount35: 46351, suggestedPrice: 67700, tags: ["tinte", "cabello", "sin amoniaco"], benefits: "Tinte sin amoniaco, cobertura de canas y cuidado capilar." },
            { code: "9518041", description: "TINTE PERMANENTE NEGRO NATURAL", points: 28, listPrice: 51250, discount35: 46351, suggestedPrice: 67700, tags: ["tinte", "cabello", "sin amoniaco"], benefits: "Tinte sin amoniaco, cobertura de canas y cuidado capilar." },
            { code: "9518043", description: "TINTE PERMANENTE ROJO", points: 28, listPrice: 51250, discount35: 46351, suggestedPrice: 67700, tags: ["tinte", "cabello", "sin amoniaco"], benefits: "Tinte sin amoniaco, cobertura de canas y cuidado capilar." },
            { code: "9518046", description: "TINTE PERMANENTE RUBIO EXTRA CLARO", points: 28, listPrice: 51250, discount35: 46351, suggestedPrice: 67700, tags: ["tinte", "cabello", "sin amoniaco"], benefits: "Tinte sin amoniaco, cobertura de canas y cuidado capilar." },
            { code: "9518047", description: "TINTE PERMANENTE MOKA", points: 28, listPrice: 51250, discount35: 46351, suggestedPrice: 67700, tags: ["tinte", "cabello", "sin amoniaco"], benefits: "Tinte sin amoniaco, cobertura de canas y cuidado capilar." },
            { code: "9518048", description: "TINTE PERMANENTE RUBIO CLARO", points: 28, listPrice: 51250, discount35: 46351, suggestedPrice: 67700, tags: ["tinte", "cabello", "sin amoniaco"], benefits: "Tinte sin amoniaco, cobertura de canas y cuidado capilar." },
            { code: "9517536", description: "LABIAL LIQUIDO MATE KALAHARI", points: 36, listPrice: 56700, discount35: 51279, suggestedPrice: 74900, tags: ["labios", "mate", "agua"], benefits: "Labial mate de larga duración, resistente al agua." },
            { code: "9517537", description: "LABIAL LIQUIDO MATE MASAI", points: 36, listPrice: 56700, discount35: 51279, suggestedPrice: 74900, tags: ["labios", "mate", "agua"], benefits: "Labial mate de larga duración, resistente al agua." },
            { code: "9517538", description: "LABIAL LIQUIDO MATE SAHARA", points: 36, listPrice: 56700, discount35: 51279, suggestedPrice: 74900, tags: ["labios", "mate", "agua"], benefits: "Labial mate de larga duración, resistente al agua." },
            { code: "9517540", description: "LABIAL LIQUIDO MATE NAIROBI", points: 36, listPrice: 56700, discount35: 51279, suggestedPrice: 74900, tags: ["labios", "mate", "agua"], benefits: "Labial mate de larga duración, resistente al agua." },
            { code: "9517541", description: "LABIAL LIQUIDO MATE SAMBURU", points: 36, listPrice: 56700, discount35: 51279, suggestedPrice: 74900, tags: ["labios", "mate", "agua"], benefits: "Labial mate de larga duración, resistente al agua." }
        ];

        // ========================
        // STATE MANAGEMENT
        // ========================
        let state = {
            currentTab: 'nutricion', // nutricion | seytu
            cart: JSON.parse(localStorage.getItem('omniCart')) || [],
            searchQuery: ''
        };

        const DOM = {
            grid: document.getElementById('productsGrid'),
            searchInput: document.getElementById('searchInput'),
            tabs: document.querySelectorAll('.tab-btn'),
            cartDrawer: document.getElementById('cartDrawer'),
            drawerOverlay: document.getElementById('drawerOverlay'),
            cartCount: document.getElementById('cartCount'),
            cartItemsList: document.getElementById('cartItemsList'),
            toast: document.getElementById('toast'),
            toastMsg: document.getElementById('toastMsg'),
            noResults: document.getElementById('noResults'),
            
            // Modal Elements
            infoModal: document.getElementById('infoModal'),
            modalContent: document.getElementById('modalContent'),
            
            // Summary Elements
            sumPoints: document.getElementById('summaryPoints'),
            sumSuggested: document.getElementById('summarySuggested'),
            sumCost: document.getElementById('summaryCost'),
            sumProfit: document.getElementById('summaryProfit'),
            totalToPay: document.getElementById('totalToPay')
        };

        // ========================
        // CORE FUNCTIONS
        // ========================

        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('es-CO', { 
                style: 'currency', 
                currency: 'COP', 
                minimumFractionDigits: 0 
            }).format(amount);
        };

        const saveCart = () => {
            localStorage.setItem('omniCart', JSON.stringify(state.cart));
            updateCartUI();
            renderProducts(); // Re-render to show quantities in cards
        };

        const addToCart = (code, qty = 1) => {
            const currentList = state.currentTab === 'nutricion' ? productsNutricion : productsSeytu;
            // Buscar en ambas listas por si acaso
            let product = productsNutricion.find(p => p.code === code) || productsSeytu.find(p => p.code === code);
            
            const existing = state.cart.find(item => item.code === code);

            if (existing) {
                existing.quantity += qty;
            } else {
                state.cart.push({ ...product, quantity: qty });
            }
            
            showToast(`Agregado: ${product.description.substring(0,20)}...`);
            saveCart();
        };

        const updateQty = (code, delta) => {
            const existing = state.cart.find(item => item.code === code);
            if (!existing) return;

            existing.quantity += delta;
            if (existing.quantity <= 0) {
                state.cart = state.cart.filter(item => item.code !== code);
                showToast("Producto eliminado", true);
            }
            saveCart();
        };

        const clearCart = () => {
            if(confirm("¿Borrar todo el pedido?")) {
                state.cart = [];
                saveCart();
                toggleCart();
            }
        }

        // ========================
        // INFO MODAL LOGIC
        // ========================
        const openInfoModal = (code) => {
            let product = productsNutricion.find(p => p.code === code) || productsSeytu.find(p => p.code === code);
            
            if(!product) return;

            const tagsHTML = product.tags ? product.tags.map(t => `<span class="tag-pill highlight">${t}</span>`).join('') : '';

            DOM.modalContent.innerHTML = `
                <div style="text-align:center; margin-bottom:1.5rem;">
                    <div style="font-size:3.5rem; color:var(--omni-purple); margin-bottom:1rem; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
                        <i class="${state.currentTab === 'nutricion' ? 'fas fa-leaf' : 'fas fa-spa'}"></i>
                    </div>
                    <h2 style="margin:0; font-size:1.4rem; color: var(--omni-purple);">${product.description}</h2>
                    <div style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem; font-weight: 600;">Código: ${product.code}</div>
                </div>

                <div style="background:linear-gradient(135deg, #F3F4F6 0%, #fff 100%); padding:1.5rem; border-radius:20px; margin-bottom:1.5rem; border: 1px solid rgba(0,0,0,0.05);">
                    <h3 style="margin:0 0 0.75rem 0; font-size:1.1rem; color:var(--omni-orange); display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-star"></i> Beneficios Principales
                    </h3>
                    <p style="margin:0; line-height:1.6; color:var(--text-main); font-size: 1rem;">
                        ${product.benefits || 'Información detallada próximamente.'}
                    </p>
                </div>

                <div class="info-tags">
                    ${tagsHTML}
                </div>

                <button onclick="closeInfoModal()" style="width:100%; margin-top:2rem; padding:14px; background:linear-gradient(135deg, var(--omni-purple), #7E57C2); color:white; border:none; border-radius:50px; font-weight:700; cursor:pointer; font-size: 1rem; box-shadow: 0 4px 15px rgba(94, 44, 131, 0.3); transition: transform 0.2s;">
                    Entendido
                </button>
            `;

            DOM.infoModal.classList.add('active');
        };

        const closeInfoModal = () => {
            DOM.infoModal.classList.remove('active');
        };

        // ========================
        // RENDER LOGIC
        // ========================

        const switchPortfolio = (tab) => {
            state.currentTab = tab;
            state.searchQuery = '';
            DOM.searchInput.value = '';
            
            DOM.tabs.forEach(btn => {
                if(btn.textContent.toLowerCase().includes(tab)) {
                    btn.classList.add('active');
                    btn.classList.add(tab === 'seytu' ? 'seytu' : 'nutricion');
                } else {
                    btn.classList.remove('active', 'seytu');
                }
            });

            renderProducts();
        };

        const renderProducts = () => {
            const list = state.currentTab === 'nutricion' ? productsNutricion : productsSeytu;
            const query = state.searchQuery.toLowerCase();
            
            // Lógica de búsqueda mejorada: Busca en Descripción, Código Y Tags (condiciones)
            const filtered = list.filter(p => {
                const matchDesc = p.description.toLowerCase().includes(query);
                const matchCode = p.code.toLowerCase().includes(query);
                const matchTags = p.tags && p.tags.some(tag => tag.toLowerCase().includes(query));
                return matchDesc || matchCode || matchTags;
            });

            if(filtered.length === 0) {
                DOM.grid.style.display = 'none';
                DOM.noResults.style.display = 'block';
                return;
            }

            DOM.grid.style.display = 'grid';
            DOM.noResults.style.display = 'none';

            DOM.grid.innerHTML = filtered.map((p, index) => {
                const inCart = state.cart.find(item => item.code === p.code);
                const qty = inCart ? inCart.quantity : 0;
                const activeClass = qty > 0 ? 'card-active' : '';
                const profit = p.suggestedPrice - p.discount35;
                
                // Staggered animation delay based on index (max 10 items to avoid long waits)
                const delay = Math.min(index * 50, 500); 

                return `
                <div class="product-card ${activeClass}" style="animation-delay: ${delay}ms">
                    <div class="card-header">
                        <span class="product-code">COD: ${p.code}</span>
                        <span class="product-points"><i class="fas fa-star"></i> ${p.points} PTS</span>
                    </div>
                    
                    <div class="product-title-row">
                        <h3 class="product-title">${p.description}</h3>
                        <button class="info-btn" onclick="openInfoModal('${p.code}')" title="Ver información">
                            <i class="fas fa-info"></i>
                        </button>
                    </div>
                    
                    <div class="card-actions">
                        <div class="in-cart-indicator">
                            <i class="fas fa-check"></i> En carrito
                        </div>
                    </div>

                    <div class="price-row">
                        <div class="price-block">
                            <div class="price-label">Precio Público</div>
                            <div class="price-value-public">${formatCurrency(p.suggestedPrice)}</div>
                            
                            <div class="profit-highlight">
                                <i class="fas fa-coins"></i> Ganas: ${formatCurrency(profit)}
                            </div>
                            
                            <div class="cost-hidden">
                                Costo: ${formatCurrency(p.discount35)}
                            </div>
                        </div>

                        <!-- Controls Logic -->
                        <div style="width: 110px;">
                            ${qty === 0 ? 
                                `<button class="add-btn" onclick="addToCart('${p.code}')">
                                    <i class="fas fa-cart-plus"></i> Agregar
                                 </button>` :
                                `<div class="qty-selector" style="display:flex; justify-content: space-between;">
                                    <button class="qty-btn-card" onclick="updateQty('${p.code}', -1)"><i class="fas fa-minus" style="font-size: 0.8rem;"></i></button>
                                    <span class="qty-val-card">${qty}</span>
                                    <button class="qty-btn-card" onclick="updateQty('${p.code}', 1)"><i class="fas fa-plus" style="font-size: 0.8rem;"></i></button>
                                 </div>`
                            }
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        };

        const updateCartUI = () => {
            // Update Badge
            const totalItems = state.cart.reduce((acc, item) => acc + item.quantity, 0);
            DOM.cartCount.innerText = totalItems;
            
            // Animate badge on change
            DOM.cartCount.style.transform = 'scale(1.5)';
            setTimeout(() => DOM.cartCount.style.transform = 'scale(1)', 200);

            // Render List inside Drawer
            if(state.cart.length === 0) {
                DOM.cartItemsList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; opacity: 0.5;">
                        <i class="fas fa-shopping-basket" style="font-size: 3rem; margin-bottom: 1rem; color: var(--text-muted);"></i>
                        <p>Tu carrito está vacío</p>
                    </div>
                `;
            } else {
                DOM.cartItemsList.innerHTML = state.cart.map((item, idx) => {
                    const profitItem = (item.suggestedPrice - item.discount35) * item.quantity;
                    return `
                    <div class="cart-item-row" style="animation-delay: ${idx * 50}ms">
                        <div class="cart-item-details">
                            <div style="font-weight:700; font-size:0.95rem; color: var(--omni-purple);">${item.description}</div>
                            <div style="display:flex; gap:10px; align-items:center; margin-top:6px;">
                                <span style="font-weight:800; color:var(--text-main); font-size: 1rem;">
                                    ${formatCurrency(item.suggestedPrice)}
                                </span>
                                <span style="font-size:0.75rem; color:var(--success); font-weight:700; background: #E8F5E9; padding: 2px 6px; border-radius: 4px;">
                                    Ganas: ${formatCurrency(profitItem)}
                                </span>
                            </div>
                        </div>
                        <div class="qty-selector">
                            <button class="qty-btn-card" onclick="updateQty('${item.code}', -1)"><i class="fas fa-minus" style="font-size: 0.7rem;"></i></button>
                            <span class="qty-val-card">${item.quantity}</span>
                            <button class="qty-btn-card" onclick="updateQty('${item.code}', 1)"><i class="fas fa-plus" style="font-size: 0.7rem;"></i></button>
                        </div>
                    </div>
                `}).join('');
            }

            // Calculate Totals
            const totals = state.cart.reduce((acc, item) => {
                acc.points += item.points * item.quantity;
                acc.suggested += item.suggestedPrice * item.quantity;
                acc.cost += item.discount35 * item.quantity;
                return acc;
            }, { points: 0, suggested: 0, cost: 0 });

            const profit = totals.suggested - totals.cost;

            DOM.sumPoints.innerText = `${totals.points} pts`;
            DOM.sumSuggested.innerText = formatCurrency(totals.suggested);
            DOM.sumCost.innerText = formatCurrency(totals.cost);
            DOM.sumProfit.innerText = formatCurrency(profit);
        };

        // ========================
        // UI INTERACTIONS
        // ========================

        const toggleCart = () => {
            DOM.cartDrawer.classList.toggle('open');
            DOM.drawerOverlay.classList.toggle('open');
        };

        const showToast = (msg, isError = false) => {
            DOM.toastMsg.innerText = msg;
            DOM.toast.style.background = isError ? '#EF4444' : '#1F2937';
            // Icon change based on type
            const icon = DOM.toast.querySelector('i');
            icon.className = isError ? 'fas fa-exclamation-circle' : 'fas fa-check-circle';
            icon.style.color = isError ? '#FECACA' : '#4ADE80';
            
            DOM.toast.classList.add('show');
            setTimeout(() => DOM.toast.classList.remove('show'), 2500);
        };

        const checkout = () => {
            if(state.cart.length === 0) return showToast("Carrito vacío", true);
            
            // Calculate totals for WhatsApp message
            const totals = state.cart.reduce((acc, item) => {
                acc.suggested += item.suggestedPrice * item.quantity;
                return acc;
            }, { suggested: 0 });

            let text = `👋 Hola, quiero realizar el siguiente pedido:%0A%0A`;
            state.cart.forEach(item => {
                text += `▪️ *(${item.quantity})* ${item.description} - ${formatCurrency(item.suggestedPrice * item.quantity)}%0A`;
            });
            text += `%0A💰 *Total a Cobrar: ${formatCurrency(totals.suggested)}*`;
            
            window.open(`https://wa.me/?text=${text}`, '_blank');
        };

        // ========================
        // EVENT LISTENERS
        // ========================

        DOM.searchInput.addEventListener('input', (e) => {
            state.searchQuery = e.target.value;
            renderProducts();
        });
        
        // Close modal on outside click
        DOM.infoModal.addEventListener('click', (e) => {
            if(e.target === DOM.infoModal) closeInfoModal();
        });

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            updateCartUI();
        });

    </script>
</body>
</html>
